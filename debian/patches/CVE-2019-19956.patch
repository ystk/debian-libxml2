--- libxml2-2.9.1+dfsg1.orig/parser.c
+++ libxml2-2.9.1+dfsg1/parser.c
@@ -14088,7 +14088,8 @@ xmlParseBalancedChunkMemoryRecover(xmlDo
     xmlFreeParserCtxt(ctxt);
     newDoc->intSubset = NULL;
     newDoc->extSubset = NULL;
-    newDoc->oldNs = NULL;
+    if(doc != NULL)
+	newDoc->oldNs = NULL;
     xmlFreeDoc(newDoc);
 
     return(ret);
